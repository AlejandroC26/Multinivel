(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56064847"],{"00f2":function(t,e,s){},"0d1f":function(t,e,s){"use strict";s("00f2")},6703:function(t,e,s){"use strict";s("f380")},"9d26":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"row"},[t._m(0),e("div",{staticClass:"col-md-3 mb-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search_code,expression:"search_code"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Buscar código..."},domProps:{value:t.search_code},on:{input:function(e){e.target.composing||(t.search_code=e.target.value)}}})]),e("div",{staticClass:"col-md-6"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.user.sponsor_user,expression:"user.sponsor_user"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"sponsor_user",e.target.multiple?s:s[0])}}},[t.users.length<=0&&t.search_code?e("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("Usuario no encontrado")]):t._e(),t._l(t.users,(function(s){return e("option",{key:s.id,domProps:{value:s.id}},[t._v(t._s(s.id+" | "+s.name+" "+s.last_name))])}))],2)])]),e("hr",{staticStyle:{color:"var(--color-dark)"}}),e("form",{on:{submit:function(e){return e.preventDefault(),t.validateRegisterUser(t.user)}}},[e("div",{staticClass:"row mt-2 mb-1"},[e("div",{staticClass:"col-md-12"},[e("p",[t._v("Documento")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.id_card,expression:"user.id_card"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.user.id_card},on:{input:function(e){e.target.composing||t.$set(t.user,"id_card",e.target.value)}}})])]),e("div",{staticClass:"row mt-2 mb-1"},[e("div",{staticClass:"col-md-6"},[e("p",[t._v("Nombres")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{type:"text",id:"name"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}})]),e("div",{staticClass:"col-md-6"},[e("p",[t._v("Apellidos")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.last_name,expression:"user.last_name"}],staticClass:"form-control",attrs:{type:"text",id:"last_name"},domProps:{value:t.user.last_name},on:{input:function(e){e.target.composing||t.$set(t.user,"last_name",e.target.value)}}})])]),e("div",{staticClass:"row mt-2 mb-1"},[e("div",{staticClass:"col-md-12"},[e("p",[t._v("Teléfono de Contacto")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.phone,expression:"user.phone"}],staticClass:"form-control",attrs:{type:"text",id:"phone"},domProps:{value:t.user.phone},on:{input:function(e){e.target.composing||t.$set(t.user,"phone",e.target.value)}}})])]),e("div",{staticClass:"row mt-2 mb-1"},[e("div",{staticClass:"col-md-6"},[e("p",[t._v("País")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.user.country,expression:"user.country"}],staticClass:"form-control",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"country",e.target.multiple?s:s[0])},function(e){return t.filterDepartments(t.user.country)}]}},t._l(t.countries,(function(s){return e("option",{key:s.code,domProps:{value:s.code}},[t._v(t._s(s.name))])})),0)]),e("div",{staticClass:"col-md-6"},[e("p",[t._v("Departamento")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.user.department,expression:"user.department"}],staticClass:"form-control",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"department",e.target.multiple?s:s[0])},function(e){return t.filterCitiesFunction(t.user.department)}]}},[e("option",{attrs:{value:"",disabled:""}},[t._v("Selecciona una opción")]),t._l(t.departments,(function(s,a){return e("option",{key:"a"+a},[t._v(t._s(s.name))])}))],2)]),e("div",{staticClass:"col-md-12"},[e("p",[t._v("Ciudad")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.user.city_id,expression:"user.city_id"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"city_id",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:"",disabled:""}},[t._v("Selecciona una opción")]),t._l(t.cities_department,(function(s){return e("option",{key:s.id,domProps:{value:s.id}},[t._v(t._s(s.name))])}))],2)])]),e("div",{staticClass:"row mt-2 mb-1"},[e("div",{staticClass:"col-md-6"},[e("p",[t._v("Tipo de Cuenta")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.user.count_type,expression:"user.count_type"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"count_type",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:"Nequi"}},[t._v("Nequi")]),e("option",{attrs:{value:"Daviplata"}},[t._v("Daviplata")]),e("option",{attrs:{value:"Bancolombia - Ahorros"}},[t._v("Bancolombia - Ahorros")]),e("option",{attrs:{value:"Bancolombia - Corriente"}},[t._v("Bancolombia - Corriente")])])]),e("div",{staticClass:"col-md-6"},[e("p",[t._v("N° de cuenta")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.count_number,expression:"user.count_number"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.count_number},on:{input:function(e){e.target.composing||t.$set(t.user,"count_number",e.target.value)}}})])]),e("hr",{staticStyle:{color:"var(--color-dark)"}}),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-md-12"},[e("p",[t._v("Login")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.login,expression:"user.login"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.login},on:{input:function(e){e.target.composing||t.$set(t.user,"login",e.target.value)}}})]),e("div",{staticClass:"col-md-6"},[e("p",[t._v("Contraseña")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),e("div",{staticClass:"col-md-6"},[e("p",[t._v("Confirmar Contraseña")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password_confirmation,expression:"user.password_confirmation"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.user.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.user,"password_confirmation",e.target.value)}}})])]),t._m(1)])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-md-3"},[e("p",[t._v("Seleccionar Patrocinador")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-md-8"}),e("div",{staticClass:"col-md-4"},[e("button",{staticClass:"btn btn-primary",staticStyle:{width:"100%"}},[t._v("Registrar")])])])}],o=s("2f62"),i=s("bc3a"),n=s.n(i),l={props:["response"],data:function(){return{search_code:"",selected_code:"",user:{name:"",last_name:"",id_card:"",phone:"",city_id:"",department:"",country:"COL",login:"",password:"",password_confirmation:"",sponsor_user:"1",count_type:"Nequi",count_number:""},users:[]}},methods:{showModalContract(){$("#modal-contract").modal("show")},confirmContract(){$("#modal-contract").modal("hide")},showModalTerms(){$("#modal-terms").modal("show")},confirmTerms(){$("#modal-terms").modal("hide")},clearFields(){this.user.name="",this.user.last_name="",this.user.id_card="",this.user.phone="",this.user.city_id="",this.user.department="",this.user.country="COL",this.user.login="",this.user.password="",this.user.password_confirmation="",this.user.sponsor_user="1",this.user.count_type="Nequi",this.user.count_number="",this.searchUser({search:"",order:"DESC",limit:20})},searchUser(t){let e=this.api_url+"/api/search/public/users";n.a.post(e,t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(t=>{this.users=t.data,t.data.length>0?this.user.sponsor_user=t.data[0].id:this.user.sponsor_user=""}).catch(t=>console.log(t.response))},filterDepartments(t){this.user.department="",this.user.city_id="",this.getCountryCities(t)},validateRegisterUser(t){if(!this.isValid(t.name))return document.getElementById("name").focus(),this.launchAlert({type:"warning",title:"El nonbre no puede contener numeros"});if(!this.isValid(t.last_name))return document.getElementById("last_name").focus(),this.launchAlert({type:"warning",title:"El apellido no puede contener numeros"});if(!t.phone)return document.getElementById("phone").focus(),this.launchAlert({type:"warning",title:"Es necesario el teléfono de contacto"});if(!t.count_number.trim())return this.launchAlert({type:"warning",title:"Es necesario el número de cuenta"});if(!t.city_id)return this.launchAlert({type:"warning",title:"Selecciona una ciudad"});if(!t.sponsor_user)return this.launchAlert({type:"warning",title:"Selecciona un patrocinador"});var e=/\s/;return e.test(t.password)?this.launchAlert({type:"warning",title:"La contraseña no puede contener espacios en blanco"}):t.password.length<3?this.launchAlert({type:"warning",title:"La contraseña debe tener una longitud mínima de 3 carácteres"}):t.password!=t.password_confirmation?this.launchAlert({type:"warning",title:"Las contraseñas no coinciden"}):void this.registerUser(t).then(t=>"error"==t.data.status&&"id_card"==t.data.case?this.launchAlert({type:"warning",title:"El documento actualmente se encuentra en uso"}):"error"==t.data.status&&"email"==t.data.case?this.launchAlert({type:"warning",title:"El correo actualmente se encuentra en uso"}):(this.clearFields(),this.response("success"),this.launchAlert({type:"success",title:"Usuario registrado exitosamente"}))).catch(t=>"max_sp"==t.response.data.case?this.launchAlert({type:"error",title:`¡El usuario con código ${this.user.sponsor_user} ya tiene dos usuarios afiliados!`}):"error"===t.response.data.status?this.launchAlert({type:"error",title:t.response.data.message}):(console.log(t),void console.log(t.response)))},launchAlert(t){t.timeout||(t.timeout=2500);const e=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:t.timeout});e.fire({icon:t.type,title:t.title,text:t.message})},isValid(t){var e=new RegExp("^[a-zA-ZÀ-ÿ ]+$"),s=t;return!!e.test(s)},filterCitiesFunction(t){this.user.city_id="",this.filterCities(t)},...Object(o["b"])("user",["registerUser"]),...Object(o["c"])("country",["getAllCountries"]),...Object(o["c"])("country",["getCountryCities"]),...Object(o["c"])("country",["filterCities"]),...Object(o["c"])(["loadSessionUser"])},mounted:function(){this.loadSessionUser(),this.getAllCountries(),this.getCountryCities("COL")},computed:{...Object(o["d"])(["api_url"]),...Object(o["d"])(["session_user"]),...Object(o["d"])("country",["countries"]),...Object(o["d"])("country",["departments"]),...Object(o["d"])("country",["cities_department"])},watch:{search_code:function(){this.search_code||(this.search_code="NADA"),this.searchUser({search:this.search_code,order:"ASC",limit:1})}}},c=l,u=(s("6703"),s("0c7c")),d=Object(u["a"])(c,a,r,!1,null,null,null);e["a"]=d.exports},a55b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("main",[e("section",{staticClass:"text-center text-lg-start"},[e("div",{staticClass:"container py-4",staticStyle:{"max-width":"1200px"}},[e("div",{staticClass:"row g-0"},[t._m(0),e("div",{staticClass:"col-lg-6 mb-5 mb-lg-0"},[e("div",{staticClass:"info-card",staticStyle:{"max-width":"410px",margin:"0 auto"}},[e("form",{on:{submit:function(e){return e.preventDefault(),t.LogIn()}}},[e("div",{staticClass:"form-outline mb-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.login,expression:"user.login"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Correo electrónico"},domProps:{value:t.user.login},on:{input:function(e){e.target.composing||t.$set(t.user,"login",e.target.value)}}})]),e("div",{staticClass:"form-outline mb-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Contraseña"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),e("button",{staticClass:"btn-login btn-block mb-4",staticStyle:{width:"100%","font-weight":"bold"},attrs:{type:"submit"}},[t._v(" Iniciar Sesión ")])]),e("hr"),"lunes"==t.dia||"jueves"==t.dia?e("a",{staticClass:"btn-register mb-3",staticStyle:{cursor:"pointer","text-decoration":"none"},on:{click:function(e){return t.showRegisterFRM()}}},[t._v("Registrarse")]):e("div",{staticClass:"btn-register"},[e("span",{staticStyle:{"font-size":".9rem"}},[t._v("Registros todos los lunes y jueves")])])])])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"modal-register",tabindex:"-1","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",staticStyle:{"max-width":"590px"}},[e("div",{staticClass:"modal-content"},[t._m(1),e("div",{staticClass:"modal-body"},[e("FrmRegisterVue",{attrs:{response:t.resultStatus}})],1)])])])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-6 mb-5 mb-lg-0"},[e("div",{staticClass:"info-text"},[e("div",{staticClass:"title-logo"},[e("h1",[t._v("Paf")])]),e("h2",{staticClass:"mb-2"},[t._v("¡Regístrate y gana!")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h3",{staticClass:"modal-title"},[t._v("Registro de Usuario")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],o=(s("bc3a"),s("9d26")),i=s("2f62"),n={name:"Login",components:{FrmRegisterVue:o["a"]},data:function(){return{user:{login:"",password:""},dia:""}},methods:{LogIn(){this.login(this.user).then(t=>{t.data.token&&(this.setToken(t.data.token),localStorage.setItem("token",t.data.token),window.location.href="admin")}).catch(t=>{if(console.log(t.response),t)return this.launchAlert({type:"error",title:"¡Usuario o contraseña incorrectos!"})})},resultStatus(t){if("success"==t)return $("#modal-register").modal("hide")},launchAlert(t){t.timeout||(t.timeout=2500);const e=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:t.timeout});e.fire({icon:t.type,title:t.title,text:t.message})},showRegisterFRM(){$("#modal-register").modal("show")},...Object(i["b"])("auth",["login"]),...Object(i["c"])(["setToken"])},mounted:function(){function t(){let t=new Date,e={weekday:"long",year:"numeric",month:"long",day:"numeric"},s=t.toLocaleDateString("es-MX",e).split(",");return s[0]}this.dia=t(),$(".modal-backdrop").remove()},computed:{...Object(i["d"])("auth",["error"]),...Object(i["d"])(["api_url"])}},l=n,c=(s("0d1f"),s("0c7c")),u=Object(c["a"])(l,a,r,!1,null,"fe70697a",null);e["default"]=u.exports},f380:function(t,e,s){}}]);
//# sourceMappingURL=chunk-56064847.1dd93ccb.js.map