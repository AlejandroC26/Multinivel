(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f8d04ad"],{7698:function(t,e,a){},"8e50":function(t,e,a){"use strict";a("7698")},a02f:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"application-container"},[a("Aside"),a("main",[a("h1",[t._v("Alianzas")]),a("div",{staticClass:"info-card"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-sm-12"},[t.session_user.pages.aliance_create?a("div",{staticClass:"add-button",on:{click:function(e){return t.modalRegister()}}},[t._m(0)]):t._e()])]),t.loaded?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search_sp,expression:"search_sp"}],staticClass:"form-control mb-2",attrs:{type:"text",placeholder:"Buscar alianza....."},domProps:{value:t.search_sp},on:{input:function(e){e.target.composing||(t.search_sp=e.target.value)}}}),a("table",{staticClass:"table table-striped"},[t._m(1),a("tbody",t._l(t.sale_points.data,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.id))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.nit))]),a("td",[t._v(t._s(e.city_name))]),a("td",[t._v(t._s(e.representative))]),a("td",[t._v(t._s(e.type))]),a("td",[t._v(t._s(e.modality))]),a("td",[t._v(t._s(e.state))]),a("td",[a("div",{staticClass:"btn-group"},[t.session_user.pages.aliance_edit?a("button",{staticClass:"btn btn-primary",staticStyle:{display:"inline-flex","align-items":"center"},on:{click:function(a){return t.modalUpdate(e.id)}}},[a("span",{staticClass:"material-icons-sharp active",staticStyle:{"font-size":"1.2rem"}},[t._v("")])]):t._e(),t.session_user.pages.aliance_asignuser||t.session_user.pages.commission_show?a("router-link",{staticClass:"btn btn-secondary submenu-btn",staticStyle:{display:"inline-flex","align-items":"center"},attrs:{to:"/alianzas"}},[a("span",{staticClass:"material-icons-sharp active",staticStyle:{"font-size":"1.2rem"}},[t._v("")]),a("div",{staticClass:"sub-menu-item"},[a("div",{staticClass:"buttons"},[a("div",{staticClass:"triangle"}),a("div",{staticClass:"links"},[a("div",[t.session_user.pages.aliance_asignuser?a("div",{staticClass:"col-12",staticStyle:{"border-bottom":"1px solid var(--color-primary)"},on:{click:function(a){return t.showAsignUserModal(e)}}},[a("button",[t._v("Asignar")])]):t._e(),t.session_user.pages.aliance_payment?a("router-link",{staticClass:"col-12",attrs:{to:"/comisiones-cargadas/"+e.id}},[a("button",[t._v("Mostrar")])]):t._e()],1)])])])]):t._e()],1)])])})),0)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-7"}),a("div",{staticClass:"col-sm-5"},[t.sale_points.total_pages<4?a("nav",{staticStyle:{float:"right"},attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[t._m(2),a("li",{staticClass:"page-item"},t._l(t.sale_points.total_pages,(function(e){return a("a",{key:e,staticClass:"page-link"},[t._v(t._s(e))])})),0),t._m(3)])]):a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item",class:{disabled:t.validatePrevious()}},[a("a",{staticClass:"page-link",on:{click:function(e){return t.previusPage()}}},[t._v("Previous")])]),a("li",{staticClass:"page-item",class:{active:t.validatePageNum()}},[a("a",{staticClass:"page-link",on:{click:function(e){return t.firstPage()}}},[t._v("1")])]),t.pagination.selected>=t.sale_points.total_pages-1?a("li",{staticClass:"page-item disabled"},[a("a",{staticClass:"page-link"},[t._v("...")])]):t._e(),t.pagination.selected==t.sale_points.total_pages?a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",on:{click:function(e){return t.numPage(t.sale_points.total_pages-1)}}},[t._v(t._s(t.sale_points.total_pages-1))])]):t._e(),a("li",{staticClass:"page-item",class:{active:!t.validatePageNum()}},[a("a",{staticClass:"page-link",on:{click:function(e){return t.numPage(t.pagination.show_num)}}},[t._v(t._s(t.pagination.show_num))])]),t.pagination.selected<t.sale_points.total_pages-1?a("li",{staticClass:"page-item disabled"},[a("a",{staticClass:"page-link"},[t._v("...")])]):t._e(),t.pagination.selected<t.sale_points.total_pages?a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",on:{click:function(e){return t.lastPage(t.sale_points.total_pages)}}},[t._v(t._s(t.sale_points.total_pages))])]):t._e(),a("li",{staticClass:"page-item",class:{disabled:t.validateLast(t.sale_points.total_pages)}},[a("a",{staticClass:"page-link",on:{click:function(e){return t.nextPage(t.sale_points.total_pages)}}},[t._v("Next")])])])])])])]):a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("div",{staticClass:"lds-dual-ring"})])])]),a("Right"),a("div",{staticClass:"modal fade",attrs:{id:"modal-partnership",tabindex:"-1","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},["register"==t.action_form?a("h3",{staticClass:"modal-title"},[t._v("Crear punto de venta")]):a("h3",{staticClass:"modal-title"},[t._v("Editar punto de venta")]),t._m(4)]),t.sale_point.id||"register"==t.action_form?a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-7"},[a("p",[t._v("Nombre")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.sale_point.name,expression:"sale_point.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.sale_point.name},on:{input:function(e){e.target.composing||t.$set(t.sale_point,"name",e.target.value)}}})]),a("div",{staticClass:"col-md-5"},[a("p",[t._v("NIT")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.sale_point.nit,expression:"sale_point.nit"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.sale_point.nit},on:{input:function(e){e.target.composing||t.$set(t.sale_point,"nit",e.target.value)}}})])]),a("div",{staticClass:"row mt-1"},[a("div",{staticClass:"col-6"},[a("p",[t._v("Departamento")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sale_point.department,expression:"sale_point.department"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.sale_point,"department",e.target.multiple?a:a[0])},function(e){return t.filterCitiesProfile(t.sale_point.department)}]}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Selecciona un Departamento")]),t._l(t.departments,(function(e,i){return a("option",{key:"a"+i},[t._v(t._s(e.name))])}))],2)]),a("div",{staticClass:"col-6"},[a("p",[t._v("Ciudad")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sale_point.city_id,expression:"sale_point.city_id"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.sale_point,"city_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Selecciona una ciudad")]),t._l(t.cities_department,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]),a("div",{staticClass:"col-md-12"},[a("p",[t._v("Dirección")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.sale_point.adress,expression:"sale_point.adress"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.sale_point.adress},on:{input:function(e){e.target.composing||t.$set(t.sale_point,"adress",e.target.value)}}})])]),a("div",{staticClass:"row mt-1"},[a("div",{staticClass:"col-sm-6"},[a("p",[t._v("Representante")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.sale_point.representative,expression:"sale_point.representative"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.sale_point.representative},on:{input:function(e){e.target.composing||t.$set(t.sale_point,"representative",e.target.value)}}})]),a("div",{staticClass:"col-sm-6"},[a("p",[t._v("Número de Contacto")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.sale_point.contact_phone,expression:"sale_point.contact_phone"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.sale_point.contact_phone},on:{input:function(e){e.target.composing||t.$set(t.sale_point,"contact_phone",e.target.value)}}})])]),a("div",{staticClass:"row mt-1"},[a("div",{class:t.col1},[a("p",[t._v("Tipo")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sale_point.type,expression:"sale_point.type"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.sale_point,"type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"aliance"}},[t._v("Alianza")]),a("option",{attrs:{value:"official"}},[t._v("Oficial")])])]),a("div",{class:t.col2},[a("p",[t._v("Modalidad")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sale_point.modality,expression:"sale_point.modality"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.sale_point,"modality",e.target.multiple?a:a[0])},function(e){return t.validateModality(t.sale_point.modality)}]}},[a("option",{attrs:{value:"percents"}},[t._v("Porcentaje")]),a("option",{attrs:{value:"options"}},[t._v("Plataforma")]),a("option",{attrs:{value:"free"}},[t._v("Libre")])])]),"free"!=t.sale_point.modality?a("div",{staticClass:"col-3"},[a("p",[t._v("Opciones")]),a("button",{staticClass:"btn btn-secondary",staticStyle:{width:"100%"},on:{click:function(e){return t.ActiveOptionField()}}},[t._v("Asignar")])]):t._e()]),"percents"==t.sale_point.modality?a("div",[t._l(t.percents,(function(e,i){return a("div",{key:i,staticClass:"row mt-2"},[a("div",{staticClass:"col-4"}),a("div",{staticClass:"col-5"},[a("p",{staticClass:"form-control",staticStyle:{cursor:"pointer"}},[t._v(t._s(e.percent)+" %")])]),a("div",{staticClass:"col-3"},[a("button",{staticClass:"btn btn-danger",staticStyle:{width:"100%"},on:{click:function(a){return t.removePercent({index:i,id:e.id})}}},[t._v("x")])])])})),t.show_option_fields?a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-4"}),a("div",{staticClass:"col-5"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.percent,expression:"percent"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Digita el porcentaje"},domProps:{value:t.percent},on:{input:function(e){e.target.composing||(t.percent=e.target.value)}}})]),a("div",{staticClass:"col-3"},[a("button",{staticClass:"btn btn-primary",staticStyle:{width:"100%"},on:{click:function(e){return t.addPercent(t.percent)}}},[t._v("+")])])]):t._e()],2):t._e(),"options"==t.sale_point.modality?a("div",[t._l(t.options,(function(e,i){return a("div",{key:i,staticClass:"row mt-2"},[a("div",{staticClass:"col-4"},[a("p",{staticClass:"form-control",staticStyle:{cursor:"pointer"}},[t._v(t._s(e.description))])]),a("div",{staticClass:"col-5"},[a("p",{staticClass:"form-control",staticStyle:{cursor:"pointer"}},[t._v("$ "+t._s(e.money))])]),a("div",{staticClass:"col-3"},[a("button",{staticClass:"btn btn-danger",staticStyle:{width:"100%"},on:{click:function(a){return t.removeOption({index:i,id:e.id})}}},[t._v("x")])])])})),t.show_option_fields?a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.option.description,expression:"option.description"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Digita la description"},domProps:{value:t.option.description},on:{input:function(e){e.target.composing||t.$set(t.option,"description",e.target.value)}}})]),a("div",{staticClass:"col-5"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.option.money,expression:"option.money"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Valor de comisión"},domProps:{value:t.option.money},on:{input:function(e){e.target.composing||t.$set(t.option,"money",e.target.value)}}})]),a("div",{staticClass:"col-3"},[a("button",{staticClass:"btn btn-primary",staticStyle:{width:"100%"},on:{click:function(e){return t.addOption(t.option)}}},[t._v("+")])])]):t._e()],2):t._e(),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-6"},[a("p",[t._v("Fecha Inicio")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.sale_point.start_date,expression:"sale_point.start_date"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.sale_point.start_date},on:{input:function(e){e.target.composing||t.$set(t.sale_point,"start_date",e.target.value)}}})]),a("div",{staticClass:"col-6"},[a("p",[t._v("Fecha Fin")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.sale_point.end_date,expression:"sale_point.end_date"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.sale_point.end_date},on:{input:function(e){e.target.composing||t.$set(t.sale_point,"end_date",e.target.value)}}})])]),"update"==t.action_form?a("div",{staticClass:"row mt-1"},[a("div",{staticClass:"col-12"},[a("p",[t._v("Estado")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sale_point.state,expression:"sale_point.state"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.sale_point,"state",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"active"}},[t._v("Activo")]),a("option",{attrs:{value:"pending"}},[t._v("Pendiente")]),a("option",{attrs:{value:"inactive"}},[t._v("Inactivo")])])])]):t._e(),a("div",{staticClass:"row mt-1"},[a("div",{staticClass:"col-md-12 mt-2"},[a("p",[a("center",[t._v("Relación de ganancias")])],1)]),a("div",{staticClass:"col-5"},[a("p",[t._v("Comercializadora")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.sale_point.percent_gain,expression:"sale_point.percent_gain"}],staticClass:"form-control",attrs:{type:"number",min:"0",max:"100"},domProps:{value:t.sale_point.percent_gain},on:{keyup:function(e){return t.calcPercent()},change:function(e){return t.calcPercent()},input:function(e){e.target.composing||t.$set(t.sale_point,"percent_gain",e.target.value)}}})]),a("div",{staticClass:"col-2"},[a("center",[a("p",{staticClass:"mt-4"},[t._v("a")])])],1),a("div",{staticClass:"col-5"},[a("p",[t._v("Comercializadora")]),a("p",{staticClass:"form-control"},[t._v(t._s(t.company_percent.toFixed(2)))])])]),a("div",{staticClass:"row mt-3"},["register"==t.action_form?a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-primary",staticStyle:{width:"100%"},on:{click:function(e){return t.register_SalePoint(t.sale_point)}}},[t._v("Guardar")])]):a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-primary",staticStyle:{width:"100%"},on:{click:function(e){return t.update_SalePoint(t.sale_point)}}},[t._v("Editar")])])])]):a("div",{staticClass:"modal-body"},[a("Loading")],1)])])]),a("div",{staticClass:"modal fade",attrs:{id:"modal-asign-user",tabindex:"-1","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title"},[t._v("Asignar encargado de "+t._s(t.asigned.sp_name))]),t._m(5)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search_code,expression:"search_code"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Buscar código a asignar..."},domProps:{value:t.search_code},on:{input:function(e){e.target.composing||(t.search_code=e.target.value)}}})]),a("div",{staticClass:"col-12"},[t.users.length>0?a("table",{staticClass:"table table-striped"},[t._m(6),a("tbody",t._l(t.users,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.id))]),a("td",[t._v(t._s(e.name)+" "+t._s(e.last_name))]),a("td",[t._v(t._s(e.email))]),a("td",[a("a",{staticClass:"btn btn-primary",on:{click:function(a){return t.AsignUser(e)}}},[t._v("Asignar")])])])})),0)]):t._e()])]),a("hr"),a("h3",[t._v("Usuarios Asignados")]),a("hr"),this.asigned.users.length>0?a("table",{staticClass:"table table-striped"},[t._m(7),a("tbody",t._l(t.asigned.users,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.user_id))]),a("td",[t._v(t._s(e.name)+" "+t._s(e.last_name))]),a("td",[t._v(t._s(e.email))]),a("td",[t.session_user.pages.aliance_removeuser?a("div",{staticClass:"text-danger",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.removeUserOfPoint(e.id)}}},[t._v(" Remover ")]):t._e()])])})),0)]):a("div",[a("p",[t._v("No hay usuarios asignados")])])])])])])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"material-icons-sharp"},[t._v("add")]),t._v("Nueva Alianza")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("ID")]),a("th",[t._v("Nombre")]),a("th",[t._v("NIT")]),a("th",[t._v("Ciudad")]),a("th",[t._v("Representante")]),a("th",[t._v("Tipo")]),a("th",[t._v("Modalidad")]),a("th",[t._v("Estado")]),a("th",[t._v("Acciones")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"page-item disabled"},[a("a",{staticClass:"page-link"},[t._v("Previous")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link"},[t._v("Next")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Código")]),a("th",[t._v("Nombre")]),a("th",[t._v("Correo")]),a("th",[t._v("Asignar")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Código")]),a("th",[t._v("Nombre")]),a("th",[t._v("Correo")]),a("th",[t._v("Acción")])])])}],n=a("5530"),o=(a("99af"),a("b0c0"),a("a4d3"),a("e01a"),a("a434"),a("d3b7"),a("159b"),a("bc3a")),l=a.n(o),r=a("2f62"),c=a("3d13"),d=a("8084"),p=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("div",{staticClass:"lds-facebook"},[a("div"),a("div"),a("div")])])}],_=a("0c7c"),m={},v=Object(_["a"])(m,p,u,!1,null,null,null),h=v.exports,g={name:"",components:{Aside:c["a"],Right:d["a"],Loading:h},data:function(){return{pagination:{selected:1,show_num:2},search_code:"",search_sp:"",users:[],asigned:{sp_id:"",sp_name:"",users:[]},action_form:"",company_percent:0,col1:"col-4",col2:"col-5",percent:"",option:{description:"",money:""},percents:[],options:[],show_option_fields:!1}},methods:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({modalUpdate:function(t){this.action_form="update",this.percents=[],this.options=[],$("#modal-partnership").modal("show"),this.loadSalePoint(t)},searchUser:function(t){var e=this,a=this.api_url+"/api/search/public/users";l.a.post(a,t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.users=t.data})).catch((function(t){return console.log(t.response)}))},loadAsignedUsers:function(t){var e=this,a=this.api_url+"/api/salepoints/".concat(t,"/asigned");l.a.post(a,null,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.asigned.users=t.data}))},AsignUser:function(t){var e=this;this.$swal.fire({title:"¿Deseas asignar asignar encargado a ".concat(this.asigned.sp_name,"?"),html:"<b>".concat(t.name," ").concat(t.last_name,"</b><br>\n                ¡El encargado obtendrá permisos para subir comisiones a esta alianza!"),showDenyButton:!0,confirmButtonText:"Confirmar",denyButtonText:"Cancelar"}).then((function(a){if(a.isConfirmed){var i=e.api_url+"/api/salepoints/asign_user";l.a.post(i,{user_id:t.id,sale_point_id:e.asigned.sp_id},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){if(201==t.status)return e.loadAsignedUsers(e.asigned.sp_id),e.launchAlert({type:"success",title:"Usuario asignado exitosamente"});console.log(t)})).catch((function(t){if(400==t.response.status)return e.launchAlert({type:"error",title:"Usuario ya se encuentra asignado"})}))}}))},removeUserOfPoint:function(t){var e=this,a=this.api_url+"/api/salepoints/remove_user/".concat(t);l.a.post(a,null,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){if(201==t.status)return e.loadAsignedUsers(e.asigned.sp_id),e.launchAlert({type:"success",title:"Usuario eliminado exitosamente"});console.log(t)}))},showAsignUserModal:function(t){this.asigned.sp_id=t.id,this.asigned.sp_name=t.name,this.loadAsignedUsers(t.id),$("#modal-asign-user").modal("show")},validateModality:function(t){"free"!=t?(this.col1="col-4",this.col2="col-5"):(this.col1="col-6",this.col2="col-6")},ActiveOptionField:function(){if(this.show_option_fields)return this.show_option_fields=!1;this.show_option_fields=!0},addPercent:function(t){var e=this;if(!(t>0))return this.launchAlert({type:"warning",title:"Digita un porcentaje válido"});if("update"!=this.action_form)return this.percents.push({id:"",percent:t}),this.show_option_fields=!1,this.percnet="",this.launchAlert({type:"success",title:"Porcentaje agregado"});var a={id:this.sale_point.id,percent:t};this.updateSalePoint(this.sale_point).then((function(i){201==i.status&&e.createPercentOption(a).then((function(a){if(201==a.status)return e.percents.push({id:a.data.data.id,percent:t}),e.show_option_fields=!1,e.percent="",e.options=[],e.launchAlert({type:"success",title:"Porcentaje agregado"})})).catch((function(t){return console.log(t.response)}))})).catch((function(t){return console.log(t.response)}))},addOption:function(t){var e=this;if(!t.description)return this.launchAlert({type:"warning",title:"Digita una descripción"});var a=parseInt(t.money);if(a<=0)return this.launchAlert({type:"warning",title:"Digita una comisión válida"});if("update"!=this.action_form)return this.options.push({description:t.description,money:a}),this.option.money="",this.option.description="",this.show_option_fields=!1,this.launchAlert({type:"success",title:"Opción agregada exitosamente"});var i={id:this.sale_point.id,description:t.description,money:a};this.updateSalePoint(this.sale_point).then((function(s){201==s.status&&e.createMoneyOption(i).then((function(i){if(201==i.status)return e.options.push({description:t.description,money:a}),e.percents=[],e.option.money="",e.option.description="",e.show_option_fields=!1,e.loadSalePoint(e.sale_point.id),e.launchAlert({type:"success",title:"Opción agregada exitosamente"})})).catch((function(t){console.log(t.response)}))})).catch((function(t){console.log(t.response)}))},removeOption:function(t){var e=this;"update"==this.action_form?this.deleteMoneyOption(t.id).then((function(a){if(201==a.status)return e.options.splice(t.index,1)})).catch((function(t){return console.log(t.response)})):this.options.splice(t.index,1)},removePercent:function(t){var e=this;"update"==this.action_form?this.deletePercentOption(t.id).then((function(a){if(201==a.status)return e.percents.splice(t.index,1)})).catch((function(t){return console.log(t)})):this.percents.splice(t.index,1)},modalRegister:function(){this.clearFields(),this.validateModality("percents"),this.action_form="register",$("#modal-partnership").modal("show")},register_SalePoint:function(t){var e=this;return t.name?t.city_id?t.start_date?t.end_date?t.percent_gain?"percents"==t.modality&&this.percents.length<=0?this.launchAlert({type:"warning",title:"Es necesario digitar al menos un porcentaje"}):"options"==t.modality&&this.options.length<=0?this.launchAlert({type:"warning",title:"Es necesario digitar al menos una opción"}):void this.createSalePoint(t).then((function(a){if(201==a.status){var i=e.percents,s=e.options;return"percents"==t.modality&&i.forEach((function(t){var i={id:a.data.data.id,percent:t.percent};e.createPercentOption(i)})),"options"==t.modality&&s.forEach((function(t){var i=parseInt(t.money),s={id:a.data.data.id,description:t.description,money:i};e.createMoneyOption(s).then()})),e.clearFields(),e.loadSalePoints(),$("#modal-partnership").modal("hide"),e.launchAlert({type:"success",title:"Alianza registrada exitosamente"})}})).catch((function(t){return console.log(t)})):this.launchAlert({type:"warning",title:"El porcentaje de ganancia es requerido"}):this.launchAlert({type:"warning",title:"La fecha de fin es requerida"}):this.launchAlert({type:"warning",title:"La fecha de inicio es requerida"}):this.launchAlert({type:"warning",title:"La ciudad es requerida"}):this.launchAlert({type:"warning",title:"El nombre es requerido"})},update_SalePoint:function(t){var e=this;return"percents"==t.modality&&this.percents.length<=0?this.launchAlert({type:"warning",title:"Es necesario digitar al menos un porcentaje"}):"options"==t.modality&&this.options.length<=0?this.launchAlert({type:"warning",title:"Es necesario digitar al menos una opción"}):void this.updateSalePoint(t).then((function(t){return 201==t.status?(e.loadSalePoints(),$("#modal-partnership").modal("hide"),e.clearFields(),e.launchAlert({type:"success",title:"Alianza actualizada exitosamente"})):e.launchAlert({type:"error",title:"Surgió un error"})})).catch((function(t){console.log(t.response)}))},clearFields:function(){this.sale_point.id="",this.sale_point.name="",this.sale_point.nit="",this.sale_point.city_id="",this.sale_point.department="",this.sale_point.adress="",this.sale_point.representative="",this.sale_point.contact_phone="",this.sale_point.percent_gain=50,this.sale_point.start_date="",this.sale_point.end_date="",this.sale_point.type="aliance",this.sale_point.modality="percents",this.sale_point.state="",this.sale_point.code="",this.sale_point.created_at="",this.company_percent=50,this.options=[],this.percents=[],this.company_percent=50},filterCitiesProfile:function(t){this.sale_point.city_id="",this.filterCities(t)},calcPercent:function(){this.company_percent=100-this.sale_point.percent_gain},validatePrevious:function(){return this.pagination.selected<=1},validateLast:function(t){return this.pagination.selected>=t},validatePageNum:function(){return 1==this.pagination.selected},firstPage:function(){this.pagination.selected=1,this.pagination.show_num=2,this.loadSalePoints({limit:10,page:this.pagination.selected})},previusPage:function(){this.pagination.selected>1&&this.pagination.selected--,this.pagination.selected>=2&&this.pagination.show_num--,this.loadSalePoints({limit:10,page:this.pagination.selected})},numPage:function(t){this.pagination.show_num=t,this.pagination.selected=t,this.loadSalePoints({limit:10,page:this.pagination.selected})},lastPage:function(t){this.pagination.show_num=t,this.pagination.selected=t,this.loadSalePoints({limit:10,page:this.pagination.selected})},nextPage:function(t){this.pagination.selected>=t||this.pagination.selected++,this.pagination.selected>2&&this.pagination.show_num++,this.loadSalePoints({limit:10,page:this.pagination.selected})},launchAlert:function(t){t.timeout||(t.timeout=2500);var e=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:t.timeout});e.fire({icon:t.type,title:t.title,text:t.message})}},Object(r["c"])(["loadSessionUser"])),Object(r["b"])("sale_point",["createSalePoint"])),Object(r["b"])("sale_point",["updateSalePoint"])),Object(r["b"])("sale_point",["createPercentOption"])),Object(r["b"])("sale_point",["deletePercentOption"])),Object(r["b"])("sale_point",["createMoneyOption"])),Object(r["b"])("sale_point",["deleteMoneyOption"])),Object(r["c"])("sale_point",["loadSalePoint"])),Object(r["c"])("sale_point",["loadSalePoints"])),Object(r["c"])("country",["getCountryCities"])),Object(r["c"])("country",["filterCities"])),mounted:function(){$(".modal-backdrop").remove(),this.loadSalePoints({limit:10}),this.loadSessionUser(),this.getCountryCities("COL")},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(r["d"])(["api_url"])),Object(r["d"])(["session_user"])),Object(r["d"])("sale_point",["sale_point"])),Object(r["d"])("sale_point",["sale_points"])),Object(r["d"])("sale_point",["loaded"])),Object(r["d"])("country",["departments"])),Object(r["d"])("country",["cities_department"])),watch:{search_code:function(){this.searchUser({search:this.search_code,order:"ASC",limit:1})},search_sp:function(){this.loadSalePoints({limit:10,search:this.search_sp})},"sale_point.id":function(){this.sale_point.id&&(this.calcPercent(),this.filterCities(this.sale_point.department),"percents"==this.sale_point.modality&&(this.percents=this.sale_point.options),"options"==this.sale_point.modality&&(this.options=this.sale_point.options),this.validateModality(this.sale_point.modality))}}},f=g,y=(a("8e50"),Object(_["a"])(f,i,s,!1,null,null,null));e["default"]=y.exports},a434:function(t,e,a){"use strict";var i=a("23e7"),s=a("da84"),n=a("23cb"),o=a("5926"),l=a("07fa"),r=a("7b0b"),c=a("65f0"),d=a("8418"),p=a("1dde"),u=p("splice"),_=s.TypeError,m=Math.max,v=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var a,i,s,p,u,f,y=r(this),C=l(y),b=n(t,C),w=arguments.length;if(0===w?a=i=0:1===w?(a=0,i=C-b):(a=w-2,i=v(m(o(e),0),C-b)),C+a-i>h)throw _(g);for(s=c(y,i),p=0;p<i;p++)u=b+p,u in y&&d(s,p,y[u]);if(s.length=i,a<i){for(p=b;p<C-i;p++)u=p+i,f=p+a,u in y?y[f]=y[u]:delete y[f];for(p=C;p>C-i+a;p--)delete y[p-1]}else if(a>i)for(p=C-i;p>b;p--)u=p+i-1,f=p+a-1,u in y?y[f]=y[u]:delete y[f];for(p=0;p<a;p++)y[p+b]=arguments[p+2];return y.length=C-i+a,s}})},e01a:function(t,e,a){"use strict";var i=a("23e7"),s=a("83ab"),n=a("da84"),o=a("e330"),l=a("1a2d"),r=a("1626"),c=a("3a9b"),d=a("577e"),p=a("9bf2").f,u=a("e893"),_=n.Symbol,m=_&&_.prototype;if(s&&r(_)&&(!("description"in m)||void 0!==_().description)){var v={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),e=c(m,this)?new _(t):void 0===t?_():_(t);return""===t&&(v[e]=!0),e};u(h,_),h.prototype=m,m.constructor=h;var g="Symbol(test)"==String(_("test")),f=o(m.toString),y=o(m.valueOf),C=/^Symbol\((.*)\)[^)]+$/,b=o("".replace),w=o("".slice);p(m,"description",{configurable:!0,get:function(){var t=y(this),e=f(t);if(l(v,t))return"";var a=g?w(e,7,-1):b(e,C,"$1");return""===a?void 0:a}}),i({global:!0,forced:!0},{Symbol:h})}}}]);
//# sourceMappingURL=chunk-7f8d04ad.0c59dc36.js.map